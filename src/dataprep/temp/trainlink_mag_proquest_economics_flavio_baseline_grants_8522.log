Namespace(testing=True, verbose=1, field=['economics'], train_name='flavio_baseline', startyear=1985, endyear=2022, mergemode='1:1', recall=0.9, institution='True', fieldofstudy_cat='False', fieldofstudy_str='False', keywords='False', retrain='True', linking_type='grants')
Have max 6 cores available
Testing is True 

finished setup ... 
firstname : david
lastname : selover
middlename : d
institution : ('old dominion university', 'university of california san diego', 'wesleyan university')

firstname : david
lastname : soloveichik
middlename : None
institution : ('university of texas at austin',)

0/10 positive, 0/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished

        SELECT a.GrantID, CAST(SUBSTR(a.Award_AwardEffectiveDate, 7, 4) AS INT) AS year
            , b.*, c.*
            , '' AS keywords, '' AS coauthors -- # necessary for current code structure
        FROM NSF_MAIN as a 
        INNER JOIN (
            SELECT GrantID, Name AS institution
            FROM NSF_Institution
        ) b 
        USING (GrantID)
        INNER JOIN (
            SELECT GrantID
                , FirstName AS firstname
                , LastName AS lastname
                , PIMidInit AS middlename --# NOTE: PISufxName is often "Jr", "Mr", JR, ... 
            FROM NSF_Investigator
            WHERE RoleCode = 'principal investigator'
        ) c
        USING (GrantID)
        WHERE AWARD_TranType = 'grant' AND AWARD_Agency = 'nsf' 
         LIMIT 500 


    SELECT f.AuthorId
        , f.year
        , f.firstname
        , f.lastname
        , CASE TRIM(SUBSTR(f.middle_lastname, 1, f.l_fullname - f.l_firstname - f.l_lastname - 1)) 
            WHEN 
                "" THEN NULL 
                ELSE TRIM(SUBSTR(f.middle_lastname, 1, f.l_fullname - f.l_firstname - f.l_lastname - 1)) 
            END as middlename 
            -- ## NOTE this gives "" for middlename when it is missing 
        , f.fieldofstudy
        , g.keywords
        , g.coauthors
        , g.institution
    FROM (
        SELECT a.AuthorId
            , a.YearFirstPub AS year
            , a.FirstName AS firstname
            , REPLACE(b.NormalizedName, RTRIM(b.NormalizedName, REPLACE(b.NormalizedName, " ", "")), "") AS lastname 
                    -- https://stackoverflow.com/questions/21388820/how-to-get-the-last-index-of-a-substring-in-sqlite
            , TRIM(SUBSTR(b.NormalizedName, length(a.FirstName) + 1)) AS middle_lastname 
                    -- this gives all except the first name 
            , length(b.NormalizedName) as l_fullname 
            , length(a.FirstName) as l_firstname
            , length(REPLACE(b.NormalizedName, RTRIM(b.NormalizedName, REPLACE(b.NormalizedName, " ", "")), "")) as l_lastname
            , e.NormalizedName AS fieldofstudy
        FROM author_sample AS a
        INNER JOIN (
            SELECT AuthorId, NormalizedName
            FROM Authors
        ) AS b USING(AuthorId)
        INNER JOIN (
            -- ## mark: different from linking graduates. filter on field0
            SELECT AuthorId, NormalizedName
            FROM author_fields c
            INNER JOIN (
                SELECT FieldOfStudyId, NormalizedName
                FROM FieldsOfStudy
            ) AS d USING(FieldOfStudyId)
            WHERE FieldClass = 'main'
                AND FieldOfStudyId IN (?)
        ) AS e USING(AuthorId)
    ) f
    LEFT JOIN (
        SELECT AuthorId
                , us_institutions_career as institution
                , coauthors
                , keywords
        FROM author_info_linking
    ) AS g USING(AuthorId)
    INNER JOIN (
        SELECT AuthorId
        FROM current_links
    ) AS f USING(AuthorId)
    WHERE length(firstname) > 1 AND year >= 1985 - 5 AND year <= 2022 + 5 
     LIMIT 500 

Starting active labeling...
firstname : david
lastname : gilo
middlename : None
institution : ('university of chicago', 'yale university')

firstname : david
lastname : soloveichik
middlename : None
institution : ('university of texas at austin',)

1/10 positive, 0/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished / (p)revious
firstname : francesco
lastname : giovannoni
middlename : None
institution : None

firstname : francesco
lastname : lin
middlename : None
institution : ('columbia university',)

1/10 positive, 1/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished / (p)revious
(y)es / (n)o / (u)nsure / (f)inished / (p)revious
firstname : ariaster
lastname : chimeli
middlename : b
institution : ('ohio university', 'university corporation for atmospheric research')

firstname : eric
lastname : chi
middlename : None
institution : ('william marsh rice university',)

2/10 positive, 1/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished / (p)revious
firstname : thamana
lastname : lekprichakul
middlename : None
institution : ('university of hawaii at manoa',)

firstname : thang
lastname : le
middlename : None
institution : ('georgia tech research corporation',)

2/10 positive, 2/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished / (p)revious
firstname : eric
lastname : ramstetter
middlename : d
institution : None

firstname : eric
lastname : chi
middlename : None
institution : ('william marsh rice university',)

3/10 positive, 2/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished / (p)revious
firstname : christopher
lastname : gust
middlename : j
institution : ('federal reserve board of governors', 'federal reserve system')

firstname : yu
lastname : gu
middlename : None
institution : ('university of maryland college park',)

3/10 positive, 3/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished / (p)revious
firstname : christopher
lastname : gust
middlename : j
institution : ('federal reserve board of governors', 'federal reserve system')

firstname : yu
lastname : gu
middlename : None
institution : ('university of maryland college park',)

4/10 positive, 3/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished / (p)revious
firstname : christopher
lastname : laincz
middlename : a
institution : ('drexel university',)

firstname : yi
lastname : lai
middlename : None
institution : ('stanford university',)

4/10 positive, 4/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished / (p)revious
firstname : michael
lastname : lokshin
middlename : None
institution : ('university of north carolina at chapel hill', 'world bank')

firstname : michael
lastname : law
middlename : None
institution : ('law michael',)

5/10 positive, 4/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished / (p)revious
firstname : alfred
lastname : guender
middlename : v
institution : ('university of north carolina at chapel hill',)

firstname : yu
lastname : gu
middlename : None
institution : ('university of maryland college park',)

5/10 positive, 5/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished / (p)revious
firstname : rodney
lastname : ludema
middlename : d
institution : ('georgetown university',)

firstname : yi
lastname : lu
middlename : None
institution : ('university of texas at austin',)

6/10 positive, 5/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished / (p)revious
firstname : jody
lastname : lipford
middlename : w
institution : ('presbyterian college',)

firstname : mengyan
lastname : li
middlename : None
institution : ('new jersey institute of technology',)

6/10 positive, 6/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished / (p)revious
firstname : david
lastname : laibson
middlename : None
institution : ('dartmouth college', 'harvard university', 'massachusetts institute of technology', 'national bureau of economic research', 'university of pennsylvania')

firstname : yi
lastname : lai
middlename : None
institution : ('stanford university',)

7/10 positive, 6/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished / (p)revious
firstname : john
lastname : fernald
middlename : g
institution : ('federal reserve bank of chicago', 'federal reserve bank of san francisco', 'federal reserve system')

firstname : alicia
lastname : fernandez fernandez
middlename : None
institution : ('nova southeastern university',)

7/10 positive, 7/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished / (p)revious
firstname : john
lastname : landonlane
middlename : None
institution : ('rutgers university',)

firstname : patrick
lastname : land
middlename : k
institution : ('florida state college at jacksonville',)

8/10 positive, 7/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished / (p)revious
firstname : roberto
lastname : garciasaltos
middlename : None
institution : None

firstname : yu
lastname : gu
middlename : None
institution : ('university of maryland college park',)

8/10 positive, 8/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished / (p)revious
firstname : david
lastname : hoaas
middlename : j
institution : ('centenary college of louisiana',)

firstname : pui
lastname : ho
middlename : s
institution : ('colorado state university',)

9/10 positive, 8/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished / (p)revious
firstname : lata
lastname : gangadharan
middlename : None
institution : None

firstname : shanzhi
lastname : wang
middlename : None
institution : ('university of arkansas little rock',)

9/10 positive, 9/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished / (p)revious
firstname : fausto
lastname : hernandeztrillo
middlename : None
institution : None

firstname : frank
lastname : fernandes
middlename : j
institution : ('northcentral technical college',)

10/10 positive, 9/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished / (p)revious
firstname : poomthan
lastname : rangkakulnuwat
middlename : None
institution : None

firstname : elaine
lastname : wang
middlename : None
institution : ('rand corporation',)

10/10 positive, 10/10 negative
Do these records refer to the same thing?
(y)es / (n)o / (u)nsure / (f)inished / (p)revious
Finished labeling
Done in 0.7837728301684062 minutes.
